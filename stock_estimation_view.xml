<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>       
        <record id="view_stock_estimation_tree" model="ir.ui.view">
            <field name="name">stock.estimation.tree</field>
            <field name="model">stock.estimation</field>
            <field name="arch" type="xml">
                <tree string="Stock Forecast Analysis" colors="orange:stock_status=='cau';red:stock_status=='ale'">         
                    <field name="stock_status" invisible="1"/>                
                    <field name="product_name" select="1"/> 
                    <field name="product_id" invisible="1"/>                
                    <field name="security_stock" select="1"/> 
                    <field name="required_qty" select="1"/>
                    <field name="outgoings_per_day" select="1"/>
                    <field name="expected_per_day" select="1"/>    
                    <field name="stock_min" select="1"/>             
                    <field name="stock_max" select="1"/>                
                    <field name="stock_virtual" select="1"/>               
                    <field name="stock_real" select="1"/>                      
                    <field name="supplier_delay" select="1"/>                        
                </tree>
            </field>
        </record>

        <record id="view_stock_estimation_graph" model="ir.ui.view">
             <field name="name">stock.estimation.graph</field>
             <field name="model">stock.estimation</field>
             <field name="arch" type="xml">
                 <graph string="Stock Estimation" type="bar">
                     <field name="product_name"/>
                     <field name="expected_per_day"/>
                 </graph>
             </field>
        </record>

        <record id="action_stock_estimation" model="ir.actions.act_window">
            <field name="name">Stock Estimation</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.estimation</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,graph</field>            
            <field name="help">Stock Estimation</field>
        </record>

        <record forcecreate="True" model="ir.cron" id="ir_cron_recalculate_stock_rules">
            <field name='name'>Recalculate min/max stock estimation</field>
            <field name='interval_number'>1</field>
            <field name='interval_type'>days</field>
            <field name="numbercall">-1</field>
            <field name="active">True</field>
            <field name="doall" eval="False" />
            <field name="model">stock.estimation</field>
            <field name="function">run_scheduler</field>
            <field name="args">()</field>
        </record>

        <record id="view_run_stock_estimation" model="ir.ui.view">
            <field name="name">Run stock estimation</field>
            <field name="model">stock.estimation.settings</field>
            <field name="arch" type="xml">
                <form string="Run stock estimation manually" version="7.0">
                    <label string="
If you press 'Run' button, the Stock Estimation module will estimate the stock of each product which has the 'automatic' or 'manual' option in 'Operation mode' product field selected.&#10; &#10;
* The Automatic option will update the minimum and maximum stock of the first order point, and procurement orders will be automatically generated by the MRP Scheduler"/>                            
                    <footer>
                        <button special="cancel" string="_Cancel" icon='gtk-cancel'/>
                        or
                         <button name="run_stock_estimation" string="Run" type="object" icon="terp-gtk-go-back-rtl"/>
                    </footer>
                </form>
            </field>
        </record>

        <act_window name="Run stock estimation manually"
            key2="client_action_multi"
            res_model="stock.estimation.settings"
            view_mode="form"
            target="new"
            id="action_stock_estimation_run"/>

        <menuitem name="Stock Estimation" id="menu_stock_estimation_manager" groups="stock.group_stock_manager,stock.group_stock_user" parent="stock.menu_stock_root" sequence="12"/>
        <menuitem name="Stock estimation manager" id="menu_action_stock_estimation" groups="stock.group_stock_manager,stock.group_stock_user" parent="menu_stock_estimation_manager" action="action_stock_estimation" sequence="10"/>
        <menuitem name="Run manually" id="menu_action_stock_estimation_run" groups="stock.group_stock_manager,stock.group_stock_user" parent="menu_stock_estimation_manager" action="action_stock_estimation_run" sequence="15"/>

    </data>
</openerp>
